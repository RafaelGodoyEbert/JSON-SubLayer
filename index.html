<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Editor de Legendas</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div class="app">
        <div class="controls">
            <select id="language-selector"
                style="background: #23272a; color: white; border: 1px solid #444; padding: 4px; border-radius: 4px; cursor: pointer;">
            </select>
            <input type="file" id="import-json" accept=".json" data-i18n-title="import_json">
            <input type="file" id="import-media" accept="video/*,audio/*" data-i18n-title="import_media">
            <button id="add-subtitle" data-i18n="add_subtitle">Adicionar Legenda</button>
            <button id="save-json" data-i18n="save">Salvar</button>
            <button id="play-pause" data-i18n="play">Play</button>
            <button id="toggle-layout" data-i18n="mode_916" title="Alternar Modo 9:16">Modo 9:16</button>
            <button id="split-by-punctuation" data-i18n="split_punctuation"
                title="Dividir por Pontuação (., !, ?, ...)">✂️ Punctuation</button>
            <label style="color: white; margin-left: 20px;">
                <input type="checkbox" id="auto-generate-chars" checked>
                <span data-i18n="auto_chars">Gerar nível caractere automaticamente</span>
            </label>
            <div class="track-controls"
                style="display: inline-flex; align-items: center; margin-left: 20px; color: white; gap: 10px;">
                <span data-i18n="layer">Camada:</span>
                <select id="track-selector"
                    style="background: #23272a; color: white; border: 1px solid #7289da; padding: 4px 8px; min-width: 120px; border-radius: 4px; cursor: pointer;"></select>
                <button id="add-track" title="Nova Camada" style="padding: 2px 10px; font-weight: bold;">+</button>
            </div>
            <span id="zoom-indicator" style="color: white; margin-left: 20px; font-weight: bold;"><span
                    data-i18n="zoom">Zoom</span>: 1.0x</span>
        </div>

        <div class="workspace" id="workspace">
            <div id="preview-area" class="preview" data-i18n="no_selection">Selecione uma legenda</div>

            <div id="video-preview" class="video-preview">
                <video id="media-player" style="max-width: 100%; max-height: 100%;"></video>
                <div id="video-placeholder" class="video-placeholder">
                    <div id="placeholder-subtitle-text" class="subtitle-text"></div>
                    <div data-i18n="no_media">Nenhum vídeo ou áudio carregado</div>
                </div>
                <div id="subtitle-overlay" class="subtitle-overlay"></div>
            </div>

            <div id="timeline-scroll-container" class="timeline-container">
                <div id="timeline-frame" class="timeline-frame">
                    <div id="timeline-ruler" class="timeline-ruler"></div>
                    <canvas id="waveform-canvas" class="waveform-canvas"></canvas>
                    <div id="timeline-content" class="timeline-content">
                        <div id="cursor" class="cursor">
                            <div class="cursor-head"></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Barras de ajuste -->
            <div id="resizer-h" class="resizer-h">↔</div>
            <div id="resizer-v" class="resizer-v">↕</div>
        </div>

        <div class="footer-credit">JSON SubLayer for WhisperX - Developed by Rafael Godoy Ebert</div>

        <div id="context-menu" class="context-menu" style="display: none;"></div>

        <!-- Modal de Exportação -->
        <div id="export-modal" class="modal" style="display: none;">
            <div class="modal-content">
                <h3 data-i18n="export_title">Exportar Legendas</h3>

                <div class="modal-body">
                    <div class="option-group">
                        <label data-i18n="format">Formato:</label>
                        <select id="export-format">
                            <option value="json" data-i18n="export_json_whisperx">JSON (WhisperX)</option>
                            <option value="premiere" data-i18n="export_json_premiere">JSON (Adobe Premiere)</option>
                            <option value="srt">SRT (SubRip)</option>
                            <option value="tsv">TSV (Tab-Separated)</option>
                        </select>
                    </div>

                    <div class="option-group">
                        <label data-i18n="track_mode">Camada:</label>
                        <select id="export-track-mode">
                            <option value="active" data-i18n="track_active">Apenas Camada Ativa</option>
                            <option value="all" data-i18n="track_all">Todas as Camadas (JSON único)</option>
                        </select>
                    </div>
                </div>

                <div class="modal-footer">
                    <button id="cancel-export" class="btn-secondary" data-i18n="cancel">Cancelar</button>
                    <button id="confirm-export" class="btn-primary" data-i18n="export_now">Exportar Agora</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal de Busca (Ctrl+F) -->
    <div id="find-modal" class="modal">
        <div class="modal-content" style="max-width: 500px;">
            <div class="modal-header">
                <h3 data-i18n="find_title">Buscar</h3>
            </div>
            <div class="modal-body">
                <div class="option-group">
                    <input type="text" id="find-input" data-i18n-placeholder="find_placeholder" placeholder="Buscar..."
                        style="width: 100%; padding: 8px;">
                </div>
                <div class="option-group" style="display: flex; gap: 10px; align-items: center;">
                    <button id="find-previous-btn" class="btn-secondary" data-i18n="find_previous">Anterior</button>
                    <button id="find-next-btn" class="btn-primary" data-i18n="find_next">Próximo</button>
                    <span id="find-status" style="margin-left: auto; color: #888;"></span>
                </div>
            </div>
            <div class="modal-footer">
                <button id="close-find" class="btn-secondary" data-i18n="close">Fechar</button>
            </div>
        </div>
    </div>

    <!-- Modal de Substituir (Ctrl+H) -->
    <div id="replace-modal" class="modal">
        <div class="modal-content" style="max-width: 500px;">
            <div class="modal-header">
                <h3 data-i18n="replace_title">Buscar e Substituir</h3>
            </div>
            <div class="modal-body">
                <div class="option-group">
                    <input type="text" id="replace-find-input" data-i18n-placeholder="find_placeholder"
                        placeholder="Buscar..." style="width: 100%; padding: 8px;">
                </div>
                <div class="option-group">
                    <input type="text" id="replace-with-input" data-i18n-placeholder="replace_placeholder"
                        placeholder="Substituir por..." style="width: 100%; padding: 8px;">
                </div>
                <div class="option-group" style="display: flex; gap: 10px; align-items: center;">
                    <button id="replace-previous-btn" class="btn-secondary" data-i18n="find_previous">Anterior</button>
                    <button id="replace-next-btn" class="btn-primary" data-i18n="find_next">Próximo</button>
                    <span id="replace-status" style="margin-left: auto; color: #888;"></span>
                </div>
                <div class="option-group" style="display: flex; gap: 10px;">
                    <button id="replace-one-btn" class="btn-primary" data-i18n="replace_one">Substituir</button>
                    <button id="replace-all-btn" class="btn-primary" data-i18n="replace_all">Substituir Todos</button>
                </div>
            </div>
            <div class="modal-footer">
                <button id="close-replace" class="btn-secondary" data-i18n="close">Fechar</button>
            </div>
        </div>
    </div>

    <!-- Lógica da aplicação -->
    <script src="languages.js"></script>
    <script src="script.js"></script>
</body>

</html>